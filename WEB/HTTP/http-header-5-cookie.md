> 모든 개발자를 위한 HTTP 웹 기본 지식 - 인프런 강의를 듣고 정리한 내용입니다.

# 쿠키
HTTP는 무상태 프로토콜이다.그래서 사용자의 정보가 저장되지 않는데 "로그인"같은 정보는 저장이 되어야한다. 이를 해결하기 위한 대안으로 "쿠키"가 있다.

1. 사용자가 로그인하면 응답으로 쿠키를 제공한다. 그리고 사용자의 쿠키 저장소에 저장된다.
![image](https://github.com/soyeong125/TIL/assets/57309311/ac1fedbe-fd08-4d23-892d-3fc68235b935)

2. 로그인 이후 다른 페이지에 접속할 때, 요청에 쿠키를 담아 전달한다.
![image](https://github.com/soyeong125/TIL/assets/57309311/a9317d28-966a-49c3-bc9c-372f9671f43a)

3. 이후 모든 요청에 쿠키 정보가 자동으로 포함된다.
</br>
- Set-Cookie : 서버에서 클라이언트로 쿠키 전달(응답)
- Cookie: 클라이언트가 서버에서 받은 쿠키를 저장하고 HTTP 요청시 서버로 전달한다.

## 특징
- 사용자 로그인 세션관리나 광고 정보 트래킹에 사용한다.
- 쿠키 정보는 항상 서버에 전송된다.
  - 네트워크 트래픽이 추가로 유발되기 때문에 최소한의 정보만 사용해야한다.(세션 Id, 인증 토큰)
  - 서버에 전송하지 않고 웹 브라우저 내부에 데이터를 저장하고 싶으면 웹 스토리지에 저장하면 된다.
- 보안에 민감한 데이터는 절 대 저장하면 안된다.

## 생명주기
- 세션 쿠키: 만료 날짜를 생략하면 브라우저 종료시 까지만 유지
- 영속 쿠키: 만료 날짜를 입력하면 해당 날짜까지 유지
- Expires
  - Set-Cookie: expires=Sat, 26-Dec-2020 04:39:21 GMT
  - 만료일이 되면 쿠키 삭제
- max-age
  - Set-Cookie: max-age=3600 (3600초)
  - 0이나 음수를 지정하면 쿠키 삭제

## 도메인
쿠키의 접근 범위
- 명시: 명시한 문서 기준 도메인 + 서브 도메인 포함
  - domain=example.org를 지정해서 쿠키를 생성한다.
  - example은 물론이고 dev.example.org도 쿠키 접근이 가능하다.
- 생략: 현재 문서 기준 도메인만 적용한다.
  - example.org 에서 쿠키를 생성히고 domain 지정을 생략한다.
  - example.org 에서만 쿠키가 접근 가능하다. dev.example.org 쿠키 미접근이다.

## 경로
- 지정한 경로를 포함한 하위 경로 페이지만 쿠키 접근이 가능하다.
- 일반적으로 path=/ 루트로 지정한다.
- 예) path=/home 지정했다면 /home -> 가능, home/level1 -> 가능, /hello -> 불가능

## 보안
- Secure
  - 쿠키는 http, https를 구분하지 않고 전송한다.
  - Secure를 적용하면 http인 경우에만 전송한다.
- HttpOnly
  - XSS 공격 방지 (웹페이지에 악성 스크립트 삽입할 수 있는 취약점)
  - 자바 스크립트 접근 불가
  - HTTP 전송에만 사용 가능
- SameSite
  - XSRF 공격 방지 (사용자가 자신의 의지와 무관하게 공격자가 요청한 행위를 특정 웹사이트에서 하는 공격)
  - 요청 도메인과 쿠키에 설정된 도메인이 같은 경우에만 쿠키 전송이 가능하다.
  - 해당 브라우저에서 지원하는지 확인하고 사용이 필요하다.

