> 모든 개발자를 위한 HTTP 웹 기본 지식 - 인프런 강의를 듣고 정리한 내용입니다.

# HTTP (HyperText Transfer Protocol)
**웹의 애플리케이션 계층 프로토콜**로 인터넷에서 데이터를 주고받을 수 있는 프로토콜이다. </br>
HTTP 메시지에 모든 것을 전송할 수 있다.
- HTML, TEXT,IMAGE, 음성, 영상, 파일 거의 모든 형태의 데이터 전송이 가능하다.
- 서버간에 데이터를 주고 받을 때도 대부분 HTTP를 사용한다.
- HTTP/3 까지 나왔고 TCP 대신에 UDP를 사용한다. 하지만 HTTP/1.1 이 가장 많이 사용된다.
서로 다른 종단 시스템에서 수행되는 프로그램은 HTTP 메세지를 교환하여 통신할 수 있다.
- HTTP는 단순하다. 메세지도 매우 단순하다. 단순하기 때문에 확장이 용이하다.

## 기반 프로토콜
- TCP : HTTP/1.1, HTTP/2
- UDP : HTTP/3
- 현재 **HTTP/1.1** 주로 사용 (HTTP/2, HTTP/3도 점점 증가 추세이다.)

## HTTP 특징
### 1. 클라이언트 서버 구조
- Request Response 구조
- 클라이언트는 서버에 요청을 보내고 응답을 대기한다.
- 서버가 요청에 대한 결과를 만들어서 응답한다.
  
### 2. 무상태 프로토콜
스테이스리스(Stateless)
- 서버가 클라이언트의 상태를 보존하지 않는다.
- 장점은 서버 확장성이 좋다 (스케일 아웃 가능) </br>
  클라이언트가 아무서버나 접속할 수 있기 때문에 중간에 서버에 장애가 나도 대처가능하다.
- 단점은 클라이언트가 추가 데이터를 전송해야한다. </br>
  저 샴푸살께요 / 저 샴푸 10개 살께요 / 저 샴푸 10개 신용카드로 살께요 이런식으로 서버에게 계속 요청해야한다.
  하지만 이렇게 하지 않으면 1번 클라이언트는 무조건 1번 서버로 가야하는 상태를 유지해야한다 (확장성이 안좋다)
- 실무 한계 존재 </br>
  모든 것을 무상태로 설계할 수 있는 경우도 있고 없는 경우도 있다.</br>
  예를 들어 로그인 서비스의 경우 상태를 유지해야한다. 이런 경우 브라우저 쿠키와 서버 세션등을 사용해서 상태를 유지해야한다. 하지만 상태유지는 최소한으로 사용해야한다.

### 3. 비 연결성
연결을 유지하는 모델은 요청에 대한 응답이 끝나도 서버는 계속 클라이언트와 연결을 유지한다. -> 서버 자원이 소모되는 문제가 발생한다. </br>
비 연결모델은 요청과 응답이 끝나면 연결을 종료한다.

- HTTP는 기본이 연결을 유지하지 않는 모델이다.
- 일반적으로 초 단위의 이하의 빠른 속도로 응답한다.
- 1시간동안 수천명이 서비스를 사용해도 실제 서버에서 동시에 처리하는 요청은 수십개 이하로 매우 작다. (웹 서핑을 하면서 동시에 버튼을 누를 확률이 얼마나 될까?)
- 서버 자원을 매우 효율적으로 사용할 수 있다.
  
비연결 모델의 한계
- TCP/IP 연결을 계속 새로 맺어야하기 때문에 3 way handshake 시간이 추가된다. </br>
- 웹 브라우저로 사이트를 요청하면 HTML뿐 아니라 자바스크립트나 CSS, 추가 이미지등 수 많은 자원이 함께 다운로드 된다. </br>
<img width="673" alt="image" src="https://github.com/soyeong125/TIL/assets/57309311/d636e13e-7257-49f4-9338-a4f2d2a71c77">
</br>
</br>
HTTP 지속연결로 문제를 해결했다.(HTTP/2, HTTP/3에서 더 많이 최적화 됨) </br>
<img width="654" alt="image" src="https://github.com/soyeong125/TIL/assets/57309311/53d6e2f3-d5e2-4192-b6b6-e0bf0e464d17">

기존의 '비지속 연결'은 각 요구/응답 쌍이 분리된 TCP연결을 통해서 보냈다. 하지만 '지속 연결'은 모든 요구와 해당하는 응답들이 같은 TCP 연결상으로 보내지도록 했다.

#### 지속 연결
- HTTP1.1 지속 연결에서 서버는 응답을 보낸 후에 TCP 연결을 그대로 유지한다.
- 같은 클라이언트와 서버 간의 이후 요청과 응답은 같은 연결을 통해 보내진다. 특히 전체 웹 페이지(HTML, 자바스크립트
,CSS,추가 이미지)를 하나의 지속 TCP연결을 통해 보낼 수 있다.
- 같은 서버에 있는 여러 웹페이지들을 하나의 지속 TCP 연결을 통해 보낼 수 있다.
- 객체에 대한 요구는 진행중인 요구에 대한 응답을 기다리지 않고 연속해서 만들어질 수 있다. (파이프라이닝)

### 결론
HTTP 서버는 일정 기간 사용되지 않으면 연결을 닫는다. 서버가 연속된 요구를 수신할 때 서버는 객체를 연속해서 보낸다.</br>
HTTP 디폴트 모드는 파이프라이닝을 이용한 지속연결을 사용한다. 


